#
# /etc/sbuild.conf: global sbuild configurations that are
# supposed to be changed only by the sbuild author, not by the user.
# Of course you're free to override values here in /etc/sbuild.conf.local
#
# commented out stuff are defaults
#
# $Id$
#

# Name of log sender
$mailfrom = "Source Builder <sbuild>";

# File with the source dependencies
$source_dependencies = "/var/lib/sbuild/source-dependencies";

# Directory for writing build logs to
#$log_dir = "$HOME/logs";

# Name of a database for logging package build times (optional, no database
# is written if empty)
$avg_time_db = "/var/lib/sbuild/avg-build-times";

# Name of a database for logging package space requirement (optional)
$avg_space_db = "/var/lib/sbuild/avg-build-space";

# Name for dir for source dependency lock files
$srcdep_lock_dir = "/var/lib/sbuild/srcdep-lock";

# When to purge the build directory afterwards; possible values are "never",
# "successful", and "always"
#$purge_build_directory="successful";

# PGP-related option to pass to dpkg-buildpackage. Usually neither .dsc
# nor .changes files shall be signed automatically.
#$pgp_options = "-us -uc";

# After that time (in minutes) of inactivity a build is terminated. Activity
# is measured by output to the log file.
$stalled_pkg_timeout = 150;

# Some packages may exceed the general timeout (e.g. redirecting output to
# a file) and need a different timeout. Below are some examples.
%individual_stalled_pkg_timeout = (
	smalleiffel => 300,
	jade => 300,
	atlas => 300,
	glibc => 1000,
	xfree86 => 1000,
	gcc-3.0 => 300,
	kwave => 600
);

# Binaries for which the access time is controlled if they're not listed as
# source dependencies (note: /usr/bin is added if executable name doesn't
# start with '/')
%watches = (
	# general utilities
	sharutils		=> [qw(uuencode uudecode)],
	emacs20			=> ["emacs"],
	groff			=> ["groff"],
	bzip2			=> [qw(bzip2 bunzip2 bzcat bz2cat)],
#	unfortunately, too much stuff uses the following, so there are much
#	false alarms :-(
#	perl			=> ["perl"],
#	diff			=> [qw(diff diff3 sdiff cmp)],
#	gzip			=> [qw(gzip gunzip zcat)],
	# development tools
	debhelper		=> [qw(dh_clean dh_testdir dh_testversion dh_buildpackage)],
	debmake			=> ["debstd"],
	bison			=> ["bison"],
	flex			=> ["flex"],
	gettext			=> [qw(gettext msgfmt msgmerge xgettext gettextize)],
	m4				=> ["m4"],
	f2c				=> [qw(f2c fc)],
	g77				=> ["g77"],
	libtool			=> [qw(/usr/share/aclocal/libtool.m4
						   /usr/share/libtool/ltmain.sh)],
#	unfortunately, too much stuff uses the following in predefined autoconf
#	macros, but doesn't really need it.
#	automake		=> [qw(automake aclocal)],
#	autoconf		=> [qw(autoconf autoheader)],
	"python-dev"	=> [qw(python /usr/include/python/Python.h)],
	gperf			=> ["gperf"],
	rcs				=> [qw(ci co ident rcs rcsdiff rlog)],
	"netkit-rpc"	=> ["rpcgen"],
	# doc formatting stuff
	"sgml-tools"	=> ["sgmltools.v1"],
	"debiandoc-sgml"=> [qw(debiandoc2html debiandoc2latex2e debiandoc2texinfo
						  debiandoc2text debiandoc2dvi debiandoc2dvips
						  debiandoc2info debiandoc2ps)],
	"jade"			=> ["jade"],
	"liburi-perl"	=> ["/usr/lib/perl5/URI/URL.pm"],
	"tetex-bin"		=> [qw(tex latex dvips)],
	texi2html		=> ["texi2html"],
	latex2html		=> ["latex2html"],
	# special stuff
	"apache-dev"	=> ["apxs"],

	# test for X libs
	"xlibs-dev"		=> [qw(/usr/X11R6/lib/libX11.a /usr/X11R6/lib/libX11.so /usr/X11R6/lib/libICE.a /usr/X11R6/lib/libICE.so /usr/X11R6/lib/libXp.a /usr/X11R6/lib/libXp.so)]
);

# Ignore watches on the following packages if the package doesn't have its own
# build dependencies in the .dsc
@ignore_watches_no_build_deps = qw(debhelper debmake xlibs-dev);

# If a source dependency is an alternative that is provided by more than one
# package, this list can select which one will be installed (if nothing is
# defined, a random provider will be used)
%alternatives = (
	"info-browser"			=> "info",
	"httpd"				=> "apache",
	"postscript-viewer"		=> "ghostview",
	"postscript-preview"		=> "psutils",
	"www-browser"			=> "lynx",
	"awk"				=> "gawk",
	"c-shell"			=> "tcsh",
	"wordlist"			=> "wenglish",
	"tclsh"				=> "tcl8.3",
	"wish"				=> "tk8.3",
	"c-compiler"			=> "gcc",
	"fortran77-compiler"		=> "g77",
	"java-compiler"			=> "jikes",
	"libc-dev"			=> "libc6-dev",
	"libgl-dev"			=> "xlibmesa-dev",
	"libncurses-dev"		=> "libncurses5-dev",
	"libz-dev"			=> "zlib1g-dev",
	"libg++-dev"			=> "libg++2.8.1.3-glibc2.1-dev",
	"emacsen"			=> "emacs21",
	"mail-transport-agent"		=> "ssmtp",
	"mail-reader"			=> "mailx",
	"news-transport-system"		=> "inn",
	"news-reader"			=> "nn",
	"pgp"				=> "pgp-i",
	"xserver"			=> "xserver-xfree86",
	"libpng-dev"			=> "libpng12-0-dev",
	"mysql-dev"			=> "libmysqlclient10-dev",
	"giflib-dev"			=> "libungif4-dev",
	"freetype2-dev"			=> "libttf-dev"
);

@no_auto_upgrade = qw(dpkg apt bash libc6 libc6-dev dpkg-dev);

# Some programs called by sbuild:

#$mailprog = "/usr/lib/sendmail";
#$dpkg = "/usr/bin/dpkg";
#$sudo = "/usr/bin/sudo";
# change to /usr/bin/sudo if you don't have fakeroot
#$fakeroot = "/usr/bin/fakeroot";
#$apt_get = "/usr/bin/apt-get";

# read local config file
require '/etc/sbuild.conf.local';

# don't remove this, Perl needs it:
1;
